plan:
  id: JUDGE-PROTOCOL-ENHANCEMENT
  summary: "Enhance Judge-Gated Protocol with advanced features, documentation, and production readiness"
  base_branch: "main"
  test_command: "pytest tests/ -v"
  
  llm_review_config:
    model: "claude-sonnet-4-20250514"
    max_tokens: 2000
    temperature: 0
    budget_usd: 2.0
    fail_on_transport_error: false
    llm_review_scope: "scope"
    include_extensions: [".py", ".md", ".yaml", ".sh"]
    exclude_patterns:
      - "tests/**"
      - "**/__pycache__/**"
      - ".repo/**"
      - "*.pyc"

  phases:
    - id: P01-protocol-core-enhancement
      description: "Enhance core protocol functionality with advanced features and improved reliability"
      scope:
        include:
          - "tools/judge.py"
          - "tools/phasectl.py"
          - "tools/lib/"
          - "tests/test_judge.py"
          - "tests/test_phasectl.py"
      gates:
        tests:
          must_pass: true
        llm_review:
          enabled: true
        drift:
          allowed_out_of_scope_changes: 1

    - id: P02-documentation-completion
      description: "Complete comprehensive documentation including user guides, API reference, and examples"
      scope:
        include:
          - "README.md"
          - "PROTOCOL.md"
          - "GETTING_STARTED.md"
          - "docs/"
          - "examples/"
      gates:
        tests:
          must_pass: true
        llm_review:
          enabled: true
        drift:
          allowed_out_of_scope_changes: 2

    - id: P03-testing-infrastructure
      description: "Build comprehensive testing infrastructure with unit, integration, and E2E tests"
      scope:
        include:
          - "tests/"
          - "tests/integration/"
          - "tests/e2e/"
          - "conftest.py"
      gates:
        tests:
          must_pass: true
        llm_review:
          enabled: true
        drift:
          allowed_out_of_scope_changes: 1

    - id: P04-production-readiness
      description: "Prepare protocol for production deployment with monitoring, error handling, and performance optimization"
      scope:
        include:
          - "tools/"
          - "requirements.txt"
          - "requirements-llm.txt"
          - "orient.sh"
          - "scripts/"
      gates:
        tests:
          must_pass: true
        llm_review:
          enabled: true
        drift:
          allowed_out_of_scope_changes: 1

    - id: P05-integration-examples
      description: "Create comprehensive examples and integration guides for different use cases"
      scope:
        include:
          - "examples/"
          - "src/mvp/"
          - "templates/"
          - "docs/examples/"
      gates:
        tests:
          must_pass: true
        llm_review:
          enabled: false
        drift:
          allowed_out_of_scope_changes: 2

    - id: P06-final-validation
      description: "Final validation, performance testing, and release preparation"
      scope:
        include:
          - "tools/"
          - "tests/"
          - "docs/"
          - "CHANGELOG.md"
          - "VERSION"
      gates:
        tests:
          must_pass: true
        llm_review:
          enabled: true
        drift:
          allowed_out_of_scope_changes: 0
